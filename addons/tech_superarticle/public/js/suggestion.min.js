function sogouSugg(){function d(a){return document.getElementById(a)}function u(a,d,c){a&&(a.addEventListener?a.addEventListener(d,c,!1):a.attachEvent?a.attachEvent("on"+d,c):a["on"+d]=c)}function F(a){if(a=a||window.event)a.preventDefault(),a.stopPropagation()}function G(a){var d=0;if(a.offsetParent)for(;;){d+=a.offsetTop;if(!a.offsetParent)break;a=a.offsetParent}else a.y&&(d+=a.y);return d}function H(a){var d=document.createElement("div");d.appendChild(document.createTextNode(a));return d.innerHTML}function I(a,c,v,k){var r=1E3*(new Date).getTime()+Math.round(1E3*Math.random());a=["http://pb.sogou.com/",a?"cl":"pv",".gif?uigs_productid=",encodeURIComponent("wxsugg"),"&sugType=",x,"&frompage=",J,"&uigs_t=",r,"&w=",encodeURIComponent(d(y).value),"&k=",encodeURIComponent(K)];c&&(a.push("&act="),a.push(encodeURIComponent(c)));a.push("&suggestionid=",k||-1);v&&a.push(v);(new Image).src=a.join("")}if(!window.JSON){var t={};window.JSON=t;t.stringify=t.stringify?t.stringify:function(){function a(a){c.lastIndex=0;return c.test(a)?'"'+a.replace(c,function(a){var d=u[a];return"string"===typeof d?d:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function d(e,c){var l,b,g=k,f,h=c[e];h&&"object"===typeof h&&"function"===typeof h.toJSON&&(h=h.toJSON(e));"function"===typeof p&&(h=p.call(c,e,h));switch(typeof h){case"string":return a(h);case"number":return isFinite(h)?String(h):"null";case"boolean":case"null":return String(h);case"object":if(!h)return"null";k+=r;f=[];if("[object Array]"===Object.prototype.toString.apply(h)){b=h.length;for(e=0;e<b;e+=1)f[e]=d(e,h)||"null";c=0===f.length?"[]":k?"[\n"+k+f.join(",\n"+k)+"\n"+g+"]":"["+f.join(",")+"]";k=g;return c}if(p&&"object"===typeof p)for(b=p.length,e=0;e<b;e+=1)l=p[e],"string"===typeof l&&(c=d(l,h))&&f.push(a(l)+(k?": ":":")+c);else for(l in h)Object.hasOwnProperty.call(h,l)&&(c=d(l,h))&&f.push(a(l)+(k?": ":":")+c);c=0===f.length?"{}":k?"{\n"+k+f.join(",\n"+k)+"\n"+g+"}":"{"+f.join(",")+"}";k=g;return c}}var c=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,k,r,u={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},p,t=function(a,c,l){var b;r=k="";if("number"===typeof l)for(b=0;b<l;b+=1)r+=" ";else"string"===typeof l&&(r=l);if((p=c)&&"function"!==typeof c&&("object"!==typeof c||"number"!==typeof c.length))throw Error("JSON.stringify");return d("",{"":a})};return window.JSON&&window.JSON.stringify?window.JSON.stringify:t}();t.parse=function(a){if(a)try{return window.JSON&&window.JSON.parse?window.JSON.parse(a):(new Function("return "+a))()}catch(R){return null}else return null}}var x,y,M,C,N,J,O,P,Q,z,c,D,K="",A=0;this.init=function(a){function t(b){try{Zepto('[name="_sug_type_"]').val(b)}catch(g){}}function v(b){if(b&&b.s)if(c.currentSugKw==b.s)0==b.s.length?k():r();else if(0==b.s.length)c.currentSugKw=b.s,k();else{var g=[],a=b.q,d=e.sugNum;A=b.s.length>d?d:b.s.length;var q,l=e.hisNum,n=L();q=[];for(var m=0;m<n.length;m++)-1<n[m].kw.indexOf(a)&&q.push(n[m]);l>q.length&&(l=q.length);a=[];for(n=0;n<l;n++)m=q[n].kw,a.push(q[n].kw),g.push('<li ontouchstart="window.sug.itemontouchstart(this)" data-history="1" onclick="window.sug.select(\''+escape(m)+"',",n+1,',event,this);"><a class="s_b_1" href="javascript:void(0)" onclick="window.sug.add(\''+escape(m)+"',",n+1,',event);"></a>'+H(m)+"</li>");q=[l,a];l=q[1];d-=q[0];q=b.s.length;try{Zepto('[name="_sug_"]').val(0<(q||0)?"y":"n")}catch(S){}q=1;for(a=0;a<b.s.length;a++){n=b.s[a];if(m=q<=d){a:{var m=n,p=l;for(s=0;s<p.length;s++)if(p[s]==m){m=!0;break a}m=!1}m=!m}m&&(q++,m=(m=(new RegExp("(.*)"+b.q+"(.*)")).exec(n))?m[1]+b.q+"<span>"+m[2]+"</span>":""+n+"",g.push('<li ontouchstart="window.sug.itemontouchstart(this)" onclick="window.sug.select(\''+escape(n)+"',"+(a+1)+',event);"><a class="s_b_1" href="javascript:" onclick="javascript:window.sug.add(\''+escape(n)+"',"+(a+1)+',event);"></a>'+m+"</li>"))}0<l.length?g.push('<li class="last"><a class="s_close" href="javascript:window.sug.close();">\u5173\u95ed</a><a class="del-record" href="javascript:window.sug.clear();">\u6e05\u9664\u5386\u53f2</a></li>'):g.push('<li class="last"><a class="s_close" href="javascript:window.sug.close();">\u5173\u95ed</a></li>');g=g.join("");g!=c.lastHTML&&(z.innerHTML=g,c.lastHTML=g);c.currentSugKw=b.s;r()}else g=c.currentSugKw="",g!=c.lastHTML&&(z.innerHTML=g,c.lastHTML=g)}function k(){"none"!=d(e.wrapper).style.display&&(d(e.wrapper).style.display="none")}function r(){"block"!=d(e.wrapper).style.display&&(d(e.wrapper).style.display="block")}function B(){if(1!=c.isClose&&c.focus){var b=d(e.inputId).value,b=b.toLowerCase();K=b=b.replace(/(^[\s\t\xa0\u3000]+)|([\u3000\xa0\s\t]+x24)/g,"").replace(/[\u2006]/g,"");if(""==b){suggestionid=1;d(e.resetbtn).style.display="none";var a=L();if(a&&0<a.length){if(c.currentSugKw!=JSON.stringify(a)){A=a.length>e.sugNum?e.sugNum:a.length;I(!1,"show","&num="+A);for(var b=[],f=0;f<a.length&&f<e.sugNum;f++){var h=a[f].kw;b.push('<li ontouchstart="window.sug.itemontouchstart(this)" onclick="window.sug.select(\''+escape(h)+"',",f+1,',event);"><a class="s_b_1" href="javascript:void(0)" onclick="window.sug.add(\''+escape(h)+"',",f+1,',event);"></a>'+H(h)+"</li>")}b.push('<li class="last"><a class="s_close" href="javascript:window.sug.close();">\u5173\u95ed</a><a class="del-record" href="javascript:window.sug.clear();">\u6e05\u9664\u5386\u53f2</a></li>');b=b.join("");b!=c.lastHTML&&(z.innerHTML=b,c.lastHTML=b);c.currentSugKw=JSON.stringify(a)}r()}else k()}else if(suggestionid=-1,d(e.resetbtn).style.display="block",(f=c.cache[b])&&0==SOGOU_SUGG_IS_CLEAN_HISTORY)v(f);else if(!c.isRequesting){c.isRequesting=!0;b:{for(a in c.cache)if(0<=b.indexOf(a)&&0==c.cache[a].s.length){a={q:b,s:[]};break b}a=null}a?l(a):(a=e.sugBaseUrl+"?key="+encodeURIComponent(b)+"&type="+x+"&pr="+Q,b=e.sugScriptId,(f=d(b))&&document.body.removeChild(f),f=document.createElement("script"),f.id=b,f.src=a,document.body.appendChild(f));SOGOU_SUGG_IS_CLEAN_HISTORY=!0}setTimeout(B,e.checkInterval)}}function p(b){try{b&&(b=b.trim?b.trim():b.replace(/(^\s*)|(\s*$)/g,"")),b&&(localStorage["kw:"+b]=JSON.stringify({time:(new Date).getTime(),kw:b}),localStorage.kwU=0)}catch(g){}}function L(){try{var b=null;if("1"==localStorage.kwU&&localStorage.kwS){var a=eval("("+localStorage.kwS+")");a&&a.length&&1<=a.length&&(b=a)}if(!b){var a=[],c;try{for(var d=localStorage.length;d--;){var e=localStorage.key(d);0==e.indexOf("kw:")&&"kw:"!=e&&a.push(JSON.parse(localStorage[e]))}if(0==a.length)return[];a.sort(function(b,a){return a.time-b.time});if(30<a.length)for(;10<a.length;)c=a.pop(),localStorage.removeItem("kw:"+c.kw);b=a;localStorage.kwS=JSON.stringify(b);localStorage.kwU=b}catch(E){}}return b}catch(E){}return null}y=a.inputid;d(y);M=a.clearid;C=a.boxid;N=a.submitform;J=a.frompage;O=a.domain||"w.sugg.sogou.com";P=a.uri||"/sugg/ajaj_json.jsp";x=a.sugType||"web";Q=a.productid||"web";D=d(C);D.innerHTML='<div class="suggestion"><ul></ul></div>';z=D.getElementsByTagName("ul")[0];var e={inputId:y,hisNum:2,sugNum:6,sugBaseUrl:"http://"+O+P,sugScriptId:"sug",checkInterval:500,wrapper:C,form:N,resetbtn:M},w=window.sug={};c={focus:!1,lastKw:"",cache:{},isRequesting:!1,currentSugKw:"",isClose:0,lastHTML:"",toucheditem:null};var l=(window.sogou=window.sogou||{}).sug=function(b){b={q:b[0],s:b[1]};""!=b.q&&(c.cache[b.q]=b);v(b);c.isRequesting=!1};try{(function(b){try{var a;a=window.isSogouApp?b.trim(b("#query").val()):b.trim(b("#keyword").val());""!=a&&p(a)}catch(f){}})(Zepto||jQuery)}catch(b){}w.close=function(){k();c.focus=!1};w.select=function(b,a,f,h){b=unescape(b);F(f);p(b);var g=e.form;d(e.inputId).value=b;b=-1;try{b=Zepto(h).attr("data-history")||-1}catch(E){}t(b);I(!0,"clk","&pos="+a+"&num="+A,b);try{Zepto(function(){0<$("#a_query").size()&&$("#a_query").click()})}catch(E){}setTimeout(function(){c.focus=!1;k();g.submit()},200)};w.add=function(a,c,f){a=unescape(a);F(f);d(e.inputId).value=a;d(e.inputId).focus()};w.clear=function(){for(var a=localStorage.length;a--;){var c=localStorage.key(a);0==c.indexOf("kw:")&&localStorage.removeItem(c)}localStorage.kwU="0";k()};w.itemontouchstart=function(a){var b=c.toucheditem;b&&(b.className="");c.toucheditem=a;a.className="touched"};c.lastKw=d(e.inputId).value;c.focus=!1;(function(){d(e.inputId).setAttribute("autocomplete","off");u(d(e.inputId),"focus",function(b){c.focus=!0;var g=navigator.userAgent;b=g.match(/(iPad).*OS\s([\d_]+)/);var g=!b&&g.match(/(iPhone\sOS)\s([\d_]+)/),f=a.scroll||7;b||g?(setTimeout(function(){window.scrollTo(0,G(d(e.inputId))-f)},10),setTimeout(B,10)):(setTimeout(function(){window.scrollTo(0,G(d(e.inputId))-f)},100),setTimeout(B,100))},!1);u(d(e.inputId),"blur",function(a){},!1);u(e.form,"submit",function(){p(d(e.inputId).value)});u(document.body,"click",function(a){(a=a||window.event)&&a.target!=d(e.inputId)&&a.target!=d(e.resetbtn)&&(c.focus=!1,k())},!1);u(document.body,"touchend",function(a){if(a=c.toucheditem)a.className=""})})()};this.sugTypeChange=function(a){x=a;c.cache={}}}(function(d){d(function(){SOGOU_SUGG_IS_CLEAN_HISTORY=!1;d("body").on("click","li  .del-record",function(){d(this).closest("ul").find("li").each(function(){1==d(this).attr("data-history")&&d(this).remove()});d(this).remove();SOGOU_SUGG_IS_CLEAN_HISTORY=!0;window.isSogouApp?d("#query").triggerHandler("change"):d("#keyword").triggerHandler("change")})})})(Zepto||jQuery);